var ZRouter=function(t,r){var u={routes:[],root:"/",el:"#z-router-view",loaderTpl:"<p>Loading...</p>",prefix:"#",getTemplate:function(e){if(e.template)p.render(u.tp(e.template,e.options)),"function"==typeof e.callback&&e.callback(e.options);else if(e.templateUrl){p.render(u.loaderTpl);var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status?(e.template=t.responseText,p.render(u.tp(t.responseText,e.options)),"function"==typeof e.callback&&e.callback(e.options)):404==t.status&&p.render("<h1>Error "+t.status+"</h1>")},t.open("GET",e.templateUrl,!0),t.send()}},getFragment:function(){""===r.location.hash&&(r.location.hash=u.prefix+u.root);var e=new RegExp(u.prefix+"(.*)$"),t=r.location.href.match(e);return(t?t[1]:"").toString()},tp:function(e,t){for(var r,n=/<%([^%>]+)?%>/g,o=/(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g,a="var r=[];\n",l=0,i=function(e,t){return a+=t?e.match(o)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",i};r=n.exec(e);)i(e.slice(l,r.index))(r[1],!0),l=r.index+r[0].length;return i(e.substr(l,e.length-l)),a+='return r.join("");',new Function(a.replace(/[\r\t\n]/g,"")).apply(t)}},p={setRoot:function(e){return u.root=e,p},setLoaderTpl:function(e){return u.loaderTpl=e,p},add:function(e){return"object"==typeof e&&e.url&&(e.template||e.templateUrl)?u.routes.push(e):console.log("This route has a problem, it cant be added!",e),p},check:function(e){for(var t,r,n=e||u.getFragment(),o={},a=0;a<u.routes.length;a++){var l=u.routes[a],i=new RegExp("^"+l.url.replace(/(:\w+)/g,"([\\w-]+)")+"$");if(t=n.match(i)){if(t.shift(),r=l.url.match(/(:\w+)/g))for(var c=0;c<r.length;c++)o[r[c].slice(1)]=t[c];return l.options||(l.options={}),l.options.params=o,u.getTemplate(l),p}}return p.navigate(u.root),p},listen:function(){var e,t=null;return clearInterval(e),e=setInterval(function(){t!==u.getFragment()&&(t=u.getFragment(),p.check(t))},50),p},render:function(e){return t.querySelector(u.el).innerHTML=e,p},navigate:function(e){return e=e||"",r.location.href=r.location.href.replace(/#(.*)$/,u.prefix+e),p},hashbang:function(e){return u.prefix=!0===e?"#!":"#",p}};return p}(document,window);